<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neon Snake</title>
<link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>

<div id="join-screen">
  <h1>NEON SNAKE</h1>
  <input type="text" id="name-input" placeholder="Enter your name" maxlength="16" autofocus>
  <div class="picker-label">PICK YOUR COLOR</div>
  <div id="color-picker"></div>
  <div class="picker-label">PICK YOUR HEAD</div>
  <div id="avatar-picker"></div>
  <div class="picker-label">OR UPLOAD CUSTOM HEAD</div>
  <div id="custom-avatar-section">
    <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
    <button id="avatar-upload-btn" class="upload-btn">
      <span class="upload-icon">üì∑</span> UPLOAD IMAGE
    </button>
    <div id="custom-avatar-preview" class="avatar-preview hidden">
      <canvas id="preview-canvas" width="60" height="60"></canvas>
      <button id="clear-custom-avatar" class="clear-btn">‚úï</button>
    </div>
  </div>
  <button id="join-btn">JOIN LOBBY</button>
  <div class="hint">Arrow keys or WASD to move</div>
</div>

<div id="lobby-screen">
  <h2>LOBBY</h2>
  <div id="lobby-players"></div>
  <div id="lobby-options">
    <h3>GAME OPTIONS</h3>
    <div class="opt-row">
      <span class="opt-label">Fruit to advance</span>
      <span class="opt-control">
        <div class="slider-container">
          <input type="range" id="opt-food-advance" min="1" max="19" value="5">
          <span class="slider-value" id="val-food-advance">5</span>
        </div>
      </span>
    </div>
    <div class="opt-row">
      <span class="opt-label">Fruit on screen</span>
      <span class="opt-control">
        <div class="slider-container">
          <input type="range" id="opt-food-count" min="1" max="5" value="3">
          <span class="slider-value" id="val-food-count">3</span>
        </div>
      </span>
    </div>
    <div class="opt-row">
      <span class="opt-label">Snakes can collide</span>
      <span class="opt-control"><button class="toggle-btn on" id="opt-collisions">ON</button></span>
    </div>
    <div class="opt-row">
      <span class="opt-label">Lives per player</span>
      <span class="opt-control">
        <div class="slider-container">
          <input type="range" id="opt-lives" min="1" max="9" value="3">
          <span class="slider-value" id="val-lives">3</span>
        </div>
      </span>
    </div>
  </div>
  <div id="ai-controls">
    <h3>AI BOTS</h3>
    <div class="opt-row">
      <span class="opt-label">Bot difficulty</span>
      <span class="opt-control">
        <div class="triple-slider-container">
          <span class="triple-slider-label">Easy</span>
          <input type="range" id="opt-bot-difficulty" min="0" max="2" value="1" step="1">
          <span class="triple-slider-label">Hard</span>
          <span class="slider-value" id="val-bot-difficulty">Medium</span>
        </div>
      </span>
    </div>
    <div class="ai-btn-row">
      <button class="ai-btn" id="add-ai-btn">+ ADD BOT</button>
    </div>
    <div id="ai-list"></div>
  </div>
  <div id="lobby-ready-count"></div>
  <button id="ready-btn">READY</button>
</div>

<div id="game-container">
  <div id="hud">
    <span class="level-info" id="level-info">LEVEL 1</span>
    <span class="food-counter" id="food-counter">FOOD: 0/5</span>
  </div>
  <div id="spectator-banner">
    <span class="spectator-icon">üëÅ</span>
    <span class="spectator-text">YOU ARE SPECTATING</span>
    <span class="spectator-hint">Game in progress ‚Äî watching mode</span>
  </div>
  <canvas id="game" width="800" height="600"></canvas>
  <div id="legend"><h3>PLAYERS</h3><div id="legend-entries"></div></div>
  <div id="countdown-overlay">
    <div class="level-text" id="cl-level">LEVEL 2</div>
    <div class="countdown-num" id="cl-num">3</div>
  </div>
  <div id="death-msg">YOU DIED ‚Äî respawning...</div>
  <div id="gameover-msg">GAME OVER<div class="sub">No lives remaining. Next level resets lives.</div><button id="return-lobby-btn">RETURN TO LOBBY</button></div>
  <div id="pause-menu">
    <h2>PAUSED</h2>
    <div class="pause-hint">Press ESC to resume</div>

    <!-- SETTINGS PANEL -->
    <div class="settings-panel" id="settings-panel">
      <div class="settings-section">
        <h3>VISUAL EFFECTS</h3>

        <!-- Particles -->
        <div class="setting-row">
          <span class="setting-label">Particles</span>
          <label class="toggle-switch">
            <input type="checkbox" id="setting-particles-enabled">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-sub">
          <div class="setting-row">
            <span class="setting-sublabel">Count</span>
            <div class="slider-container">
              <input type="range" id="setting-particle-count" min="5" max="50" value="18">
              <span class="slider-value" id="val-particle-count">18</span>
            </div>
          </div>
          <div class="setting-row">
            <span class="setting-sublabel">Velocity</span>
            <div class="slider-container">
              <input type="range" id="setting-particle-velocity" min="20" max="300" value="100">
              <span class="slider-value" id="val-particle-velocity">100</span>
            </div>
          </div>
          <div class="setting-row">
            <span class="setting-sublabel">Life</span>
            <div class="slider-container">
              <input type="range" id="setting-particle-life" min="1" max="10" value="4">
              <span class="slider-value" id="val-particle-life">0.4s</span>
            </div>
          </div>
        </div>

        <!-- Screen Shake -->
        <div class="setting-row">
          <span class="setting-label">Screen Shake</span>
          <label class="toggle-switch">
            <input type="checkbox" id="setting-screenshake-enabled">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-sub">
          <div class="setting-row">
            <span class="setting-sublabel">Intensity</span>
            <div class="slider-container">
              <input type="range" id="setting-screenshake-intensity" min="1" max="20" value="5">
              <span class="slider-value" id="val-screenshake-intensity">5</span>
            </div>
          </div>
          <div class="setting-row">
            <span class="setting-sublabel">Triggers</span>
            <div class="trigger-group">
              <label><input type="checkbox" id="setting-shake-trigger-eat" checked> Eat</label>
              <label><input type="checkbox" id="setting-shake-trigger-death" checked> Death</label>
            </div>
          </div>
        </div>

        <!-- Area Warp -->
        <div class="setting-row">
          <span class="setting-label">Area Warp</span>
          <label class="toggle-switch">
            <input type="checkbox" id="setting-areawarp-enabled">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-sub">
          <div class="setting-row">
            <span class="setting-sublabel">Intensity</span>
            <div class="slider-container">
              <input type="range" id="setting-areawarp-intensity" min="1" max="30" value="10">
              <span class="slider-value" id="val-areawarp-intensity">10</span>
            </div>
          </div>
          <div class="setting-row">
            <span class="setting-sublabel">Radius</span>
            <div class="slider-container">
              <input type="range" id="setting-areawarp-radius" min="50" max="200" value="100">
              <span class="slider-value" id="val-areawarp-radius">100</span>
            </div>
          </div>
        </div>

        <!-- Food Pulse -->
        <div class="setting-row">
          <span class="setting-label">Food Pulse</span>
          <label class="toggle-switch">
            <input type="checkbox" id="setting-pulse-enabled">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-sub">
          <div class="setting-row">
            <span class="setting-sublabel">Intensity</span>
            <div class="slider-container">
              <input type="range" id="setting-pulse-intensity" min="0" max="100" value="30">
              <span class="slider-value" id="val-pulse-intensity">30%</span>
            </div>
          </div>
          <div class="setting-row">
            <span class="setting-sublabel">Speed</span>
            <div class="slider-container">
              <input type="range" id="setting-pulse-speed" min="50" max="300" value="150">
              <span class="slider-value" id="val-pulse-speed">150ms</span>
            </div>
          </div>
        </div>

        <!-- Glow -->
        <div class="setting-row">
          <span class="setting-label">Glow</span>
          <label class="toggle-switch">
            <input type="checkbox" id="setting-glow-enabled">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-sub">
          <div class="setting-row">
            <span class="setting-sublabel">Intensity</span>
            <div class="slider-container">
              <input type="range" id="setting-glow-intensity" min="0" max="200" value="100">
              <span class="slider-value" id="val-glow-intensity">100%</span>
            </div>
          </div>
        </div>
      </div>

      <div class="settings-section">
        <h3>AUDIO</h3>

        <!-- Master Volume -->
        <div class="setting-row">
          <span class="setting-label">Master Volume</span>
          <label class="toggle-switch">
            <input type="checkbox" id="setting-sfx-enabled">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-sub">
          <div class="setting-row">
            <span class="setting-sublabel">Volume</span>
            <div class="slider-container">
              <input type="range" id="setting-master-volume" min="0" max="100" value="50">
              <span class="slider-value" id="val-master-volume">50%</span>
            </div>
          </div>
        </div>

        <!-- Eat Sound -->
        <div class="setting-row">
          <span class="setting-label">Eat Sound</span>
          <label class="toggle-switch">
            <input type="checkbox" id="setting-eat-enabled">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-sub">
          <div class="setting-row">
            <span class="setting-sublabel">Volume</span>
            <div class="slider-container">
              <input type="range" id="setting-eat-volume" min="0" max="100" value="18">
              <span class="slider-value" id="val-eat-volume">18%</span>
            </div>
          </div>
          <div class="setting-row">
            <span class="setting-sublabel">Pitch</span>
            <div class="slider-container">
              <input type="range" id="setting-eat-pitch" min="0" max="100" value="50">
              <span class="slider-value" id="val-eat-pitch">50%</span>
            </div>
          </div>
        </div>

        <!-- Death Sound -->
        <div class="setting-row">
          <span class="setting-label">Death Sound</span>
          <label class="toggle-switch">
            <input type="checkbox" id="setting-death-enabled">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <div class="setting-sub">
          <div class="setting-row">
            <span class="setting-sublabel">Volume</span>
            <div class="slider-container">
              <input type="range" id="setting-death-volume" min="0" max="100" value="20">
              <span class="slider-value" id="val-death-volume">20%</span>
            </div>
          </div>
          <div class="setting-row">
            <span class="setting-sublabel">Pitch</span>
            <div class="slider-container">
              <input type="range" id="setting-death-pitch" min="0" max="100" value="50">
              <span class="slider-value" id="val-death-pitch">50%</span>
            </div>
          </div>
        </div>
      </div>

      <div class="settings-actions">
        <button id="reset-settings-btn">Reset to Defaults</button>
      </div>
    </div>

    <button id="pause-quit-btn">QUIT TO LOBBY</button>
  </div>
</div>

<!-- Crop Modal -->
<div id="crop-modal" class="modal hidden">
  <div class="modal-content">
    <h3>CROP YOUR HEAD</h3>
    <div class="crop-container">
      <canvas id="crop-canvas"></canvas>
      <div id="crop-overlay"></div>
    </div>
    <div class="crop-controls">
      <button id="crop-cancel">CANCEL</button>
      <button id="crop-confirm">CONFIRM</button>
    </div>
  </div>
</div>

<script type="module" src="/static/js/main.js"></script>
</body>
</html>
